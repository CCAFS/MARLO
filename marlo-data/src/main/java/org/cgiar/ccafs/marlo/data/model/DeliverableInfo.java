package org.cgiar.ccafs.marlo.data.model;
// Generated Aug 28, 2017 2:21:11 PM by Hibernate Tools 4.3.1.Final

import org.cgiar.ccafs.marlo.data.IAuditLog;

import com.google.gson.annotations.Expose;

/**
 * DeliverableInfo generated by hbm2java
 */
public class DeliverableInfo extends MarloAuditableEntity implements java.io.Serializable, IAuditLog {

  private static final long serialVersionUID = -8647145762226231826L;
  @Expose
  private CrpClusterKeyOutput crpClusterKeyOutput;
  @Expose
  private CrpProgramOutcome crpProgramOutcome;
  @Expose
  private DeliverableType deliverableType;

  private Deliverable deliverable;
  @Expose
  private Phase phase;
  @Expose
  private String title;
  @Expose
  private String description;
  @Expose
  private String typeOther;
  @Expose
  private Integer newExpectedYear;
  @Expose
  private int year;
  @Expose
  private Integer status;
  @Expose
  private String statusDescription;
  @Expose
  private Boolean adoptedLicense;
  @Expose
  private Boolean isLocationGlobal;
  @Expose
  private RepIndGeographicScope geographicScope;
  @Expose
  private RepIndRegion region;

  public DeliverableInfo() {
  }

  public Boolean getAdoptedLicense() {
    return adoptedLicense;
  }

  public CrpClusterKeyOutput getCrpClusterKeyOutput() {
    return crpClusterKeyOutput;
  }


  public CrpProgramOutcome getCrpProgramOutcome() {
    return crpProgramOutcome;
  }

  public Deliverable getDeliverable() {
    return deliverable;
  }


  public DeliverableType getDeliverableType() {
    return deliverableType;
  }

  public String getDescription() {
    return description;
  }


  public RepIndGeographicScope getGeographicScope() {
    return geographicScope;
  }


  public Boolean getIsLocationGlobal() {
    return isLocationGlobal;
  }

  @Override
  public String getLogDeatil() {
    StringBuilder sb = new StringBuilder();
    sb.append("Id : ").append(this.getId());
    return sb.toString();
  }


  public Integer getNewExpectedYear() {
    return newExpectedYear;
  }


  public Phase getPhase() {
    return phase;
  }


  public RepIndRegion getRegion() {
    return region;
  }


  public Integer getStatus() {
    return status;
  }

  public String getStatusDescription() {
    return statusDescription;
  }


  public String getStatusName(Phase phase) {


    try {
      if (this.status != null) {
        if (status == Integer.parseInt(ProjectStatusEnum.Ongoing.getStatusId())) {
          if (phase.getYear() > this.getYear()) {
            return "Ready to be reported on ";
          }
        }
      }
      if (this.status != null) {
        return ProjectStatusEnum.getValue(this.status).getStatus() != null
          ? ProjectStatusEnum.getValue(this.status).getStatus() : "";
      } else {
        return "";
      }
    } catch (Exception e) {
      return "";
    }
  }


  public String getTitle() {
    return title;
  }


  public String getTypeOther() {
    return typeOther;
  }


  public int getYear() {
    return year;
  }

  /**
   * Check if the deliverables is completed in the current cycle
   */
  public Boolean isCompleted() {
    if (this.getStatus() == null) {
      return false;
    }

    if (this.getStatus() != null
      && this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Complete.getStatusId())) {
      if (this.getNewExpectedYear() != null && this.getNewExpectedYear().intValue() != -1) {
        if (this.getNewExpectedYear() == phase.getYear()) {
          return true;
        }
      } else {
        if (this.getYear() == phase.getYear()) {
          return true;
        }
      }
    }

    return false;
  }

  /**
   * Check if the deliverables is from a previous year for the current cycle
   * Used in Project.getCurrentDeliverables and Project.getPreviousDeliverables to generate the deliverable list and;
   * 
   * @return
   */
  public Boolean isPrevious() {

    if (this.getStatus() != null
      && this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Extended.getStatusId())) {
      if (this.getNewExpectedYear() != null && this.getNewExpectedYear().intValue() != -1) {
        if (this.getNewExpectedYear() < phase.getYear()) {
          return true;
        }
      }
    }

    if (this.getStatus() != null
      && (this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Complete.getStatusId())
        || this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Cancelled.getStatusId()))) {
      if (this.getNewExpectedYear() != null && this.getNewExpectedYear().intValue() != -1) {
        if (this.getNewExpectedYear() < phase.getYear()) {
          return true;
        }
      } else {
        if (this.getYear() < phase.getYear()) {
          return true;
        }
      }
    }

    if (this.getStatus() != null
      && (this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Ongoing.getStatusId()))) {
      if (this.getYear() < phase.getYear()) {
        return true;
      }
    }

    return false;
  }

  /**
   * Check if the deliverable is required for the current cycle
   * Used in BaseAction.isDeliverableComplete to know if the Deliverable is Complete
   * 
   * @return
   */
  public Boolean isRequiredToComplete() {
    if (this.getStatus() == null) {
      return true;
    }

    if (this.getStatus() != null
      && this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Extended.getStatusId())) {
      if (this.getNewExpectedYear() != null && this.getNewExpectedYear().intValue() != -1) {
        if (this.getNewExpectedYear() == this.getPhase().getYear()) {
          return true;
        }
      } else {
        return true;
      }
    }

    if (this.getStatus() != null
      && this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Complete.getStatusId())) {
      if (this.getNewExpectedYear() != null && this.getNewExpectedYear().intValue() != -1) {
        if (this.getNewExpectedYear() == this.getPhase().getYear()) {
          return true;
        }
      } else {
        if (this.getYear() == this.getPhase().getYear()) {
          return true;
        }
      }
    }

    if (this.getStatus() != null
      && this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Cancelled.getStatusId())) {
      return false;
    }

    if (this.getStatus() != null
      && (this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Ongoing.getStatusId()))) {
      if (this.getYear() == this.getPhase().getYear()) {
        return true;
      }
    }

    return false;
  }

  /**
   * Check if the deliverable has complete status for the current cycle with the expected year >= phase.year
   * Used in BaseAction.isDeliverableComplete to know if the Deliverable is Complete
   * 
   * @return
   */
  public Boolean isStatusCompleteInNextPhases() {
    if (this.getStatus() == null) {
      return true;
    }

    if (this.getStatus() != null
      && this.getStatus().intValue() == Integer.parseInt(ProjectStatusEnum.Complete.getStatusId())) {
      if (this.getNewExpectedYear() != null && this.getNewExpectedYear().intValue() != -1) {
        if (this.getNewExpectedYear() >= this.getPhase().getYear()) {
          return true;
        }
      } else {
        if (this.getYear() == this.getPhase().getYear()) {
          return true;
        }
      }
    }

    return false;
  }

  public boolean requeriedFair() {
    try {
      if (this.getDeliverableType().getFair()) {
        return true;
      }
      if (this.getDeliverableType().getDeliverableCategory().getFair()) {
        return true;
      }
    } catch (Exception e) {
      return false;
    }
    return false;
  }


  public void setAdoptedLicense(Boolean adoptedLicense) {
    this.adoptedLicense = adoptedLicense;
  }


  public void setCrpClusterKeyOutput(CrpClusterKeyOutput crpClusterKeyOutput) {
    this.crpClusterKeyOutput = crpClusterKeyOutput;
  }


  public void setCrpProgramOutcome(CrpProgramOutcome crpProgramOutcome) {
    this.crpProgramOutcome = crpProgramOutcome;
  }


  public void setDeliverable(Deliverable deliverable) {
    this.deliverable = deliverable;
  }


  public void setDeliverableType(DeliverableType deliverableType) {
    this.deliverableType = deliverableType;
  }


  public void setDescription(String description) {
    this.description = description;
  }


  public void setGeographicScope(RepIndGeographicScope geographicScope) {
    this.geographicScope = geographicScope;
  }


  public void setIsLocationGlobal(Boolean isLocationGlobal) {
    this.isLocationGlobal = isLocationGlobal;
  }


  public void setNewExpectedYear(Integer newExpectedYear) {
    this.newExpectedYear = newExpectedYear;
  }


  public void setPhase(Phase phase) {
    this.phase = phase;
  }


  public void setRegion(RepIndRegion region) {
    this.region = region;
  }

  public void setStatus(Integer status) {
    this.status = status;
  }


  public void setStatusDescription(String statusDescription) {
    this.statusDescription = statusDescription;
  }


  public void setTitle(String title) {
    this.title = title;
  }


  public void setTypeOther(String typeOther) {
    this.typeOther = typeOther;
  }

  public void setYear(int year) {
    this.year = year;
  }

  public void updateDeliverableInfo(DeliverableInfo update) {
    this.setAdoptedLicense(update.getAdoptedLicense());
    this.setCrpClusterKeyOutput(update.getCrpClusterKeyOutput());
    this.setCrpProgramOutcome(update.getCrpProgramOutcome());
    this.setDeliverable(update.getDeliverable());
    this.setDescription(update.getDescription());
    this.setNewExpectedYear(update.getNewExpectedYear());
    this.setStatus(update.getStatus());
    this.setTitle(update.getTitle());
    this.setTypeOther(update.getTypeOther());
    this.setDeliverableType(update.getDeliverableType());
    this.setYear(update.getYear());
    this.setStatusDescription(update.getStatusDescription());
    this.setGeographicScope(update.getGeographicScope());
    this.setRegion(update.getRegion());
  }


}

